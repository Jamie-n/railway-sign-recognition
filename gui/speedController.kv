#:import rgba kivy.utils.get_color_from_hex
#:import constants utils.constants

<InterfaceController>
    FloatLayout:
        size: root.width, root.height

        GridLayout:
            rows: 3

            GridLayout:
                cols: 3
                size_hint_y: None
                height: 30

                Button:
                    text: "Settings"
                    on_press: root.open_settings()

                Button:
                    text: "Start Detection"
                    id: start_detection_button
                    on_press: root.begin_detection()

                Button:
                    text: "Stop Detection"
                    disabled: True
                    id: stop_detection_button
                    on_press: root.halt_detection()

            GridLayout:
                cols:2
                size_hint_y: None
                height: 150
                padding: 30

                Label:
                    text: 'Current Speed'
                    bold: True
                    font_size: 32

                Label:
                    text: 'Current Limit'
                    bold: True
                    font_size: 32



                Label:
                    text: '00'
                    bold: True
                    font_size: 32
                    id: current_speed_value



                Label:
                    text: '00'
                    bold: True
                    font_size: 32
                    id: current_limit_value



            GridLayout:
                rows:2
                GridLayout:
                    cols: 2

                    Image:


                    GridLayout:
                        cols: 2
                        Slider:
                            id: throttle_slider
                            min: 0
                            max: 100
                            step: 1
                            orientation: 'vertical'
                            value_track_color: (1, 0, 0, 1)
                            value_track: True
                            background_color: (1,0, 0, 1)

                        Slider:
                            id: brake_slider
                            min: 0
                            max: 100
                            step: 1
                            orientation: 'vertical'
                            value_track_color: (1, 0, 0, 1)
                            value_track: True

                        Label:
                            size_hint_y: None
                            height: 50
                            line_height: 0
                            text: "Throttle"
                            bold: True
                            font_size: 20

                        Label:
                            size_hint_y: None
                            height: 50
                            line_height: 0
                            text: "Brake"
                            bold: True
                            font_size: 20


                GridLayout:
                    cols: 2
                    row_default_height: 50
                    size_hint_y: None

                    Button:
                        text: "Acknowledge"
                        font_size: 32
                        bold: True
                        background_color: (0, 2, 0, 1)

                    Button:
                        text: "Stop"
                        font_size: 32
                        bold: True
                        background_color: (2, 0,0, 1)

<SettingsPopup>
    size_hint: .75,.75
    auto_dismiss: False
    title: "Settings"

    AnchorLayout:
        BoxLayout:
            orientation: "vertical"
            id: settings_popup

            GridLayout:
                cols:2
                size_hint_y: None
                height:40
                Label:
                    text: 'Capture Height:'
                TextInput:
                    size_hint_y: None
                    height:30
                    input_filter: 'float'
                    id: CAPTURE_HEIGHT
                    multiline: False
            GridLayout:
                cols:2
                size_hint_y: None
                height:40
                Label:
                    text: 'Capture Width:'
                TextInput:
                    size_hint_y: None
                    height:30
                    input_filter: 'float'
                    id: CAPTURE_WIDTH
                    multiline: False

            GridLayout:
                cols:2
                size_hint_y: None
                height:40
                Label:

                    text: 'Capture Device:'
                TextInput:
                    size_hint_y: None
                    height:30
                    id: CAPTURE_DEVICE
                    multiline: False

            BoxLayout:
                size_hint_y: None
                height:40
                Button:
                    size_hint_y: None
                    height:30
                    text: 'Preview'
                    on_press: root.preview_capture()

            GridLayout:
                cols:2
                Label:
                    size_hint_y: None
                    height:40
                    text: 'DLL Path'
                TextInput:
                    size_hint_y: None
                    height:30
                    id: DLL_PATH
                    multiline: False

            GridLayout:
                cols:2
                size_hint_y: None
                height:40
                Button:
                    text: 'Cancel'
                    on_press: root.dismiss()

                Button:
                    text: 'Save Settings'
                    on_press: root.save_settings()

<CapturePreviewPopup>
    size_hint: .75,.75
    auto_dismiss: False
    title: "Capture Preview"

    AnchorLayout:
        GridLayout:
            rows:2

            Image:
                id: preview_image
                size: root.width, root.height

            Button:
                size_hint_y: None
                height:30
                text: 'Close'
                on_press: root.dismiss()
